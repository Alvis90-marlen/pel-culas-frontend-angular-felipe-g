<div class="container">
  <h1>Bienvenido a Películas</h1>

  <div>
    <h2>Lista de Películas</h2>
    <!-- Botón para ir a la página de administración/creación -->
    <button (click)="goToAdmin()">
      Administrar Películas
    </button>
  </div>

  <!-- Controles de Búsqueda y Ordenamiento -->
  <div>
    <!-- Búsqueda por Título -->
    <div>
      <label for="searchTitle">Buscar por Título:</label>
      <input type="text" id="searchTitle" [(ngModel)]="searchText" (input)="aplicarFiltros()"
             placeholder="Ej. Interstellar">
    </div>

    <!-- Ordenar por -->
    <div>
      <label for="sortBy">Ordenar por:</label>
      <select id="sortBy" [(ngModel)]="sortBy" (change)="aplicarFiltros()">
        <option value="">Sin Orden</option>
        <option value="titulo">Título</option>
        <option value="puntaje">Puntaje</option>
        <option value="fechaCreacion">Fecha de Creación</option>
      </select>
    </div>

    <!-- Dirección de Ordenamiento -->
    <div>
      <label for="sortDirection">Dirección:</label>
      <select id="sortDirection" [(ngModel)]="sortDirection" (change)="aplicarFiltros()">
        <option value="asc">Ascendente</option>
        <option value="desc">Descendente</option>
      </select>
    </div>
  </div>

  <div class="movie-grid">
    <div *ngFor="let pelicula of peliculas" class="movie-card">
      <img [src]="pelicula.imagen || 'https://placehold.co/150x200/cccccc/000000?text=Sin+Imagen'"
           alt="Cubierta de {{ pelicula.titulo }}"
           onerror="this.onerror=null;this.src='https://placehold.co/150x200/cccccc/000000?text=Sin+Imagen';">
      <h3>{{ pelicula.titulo }}</h3>
      <p><strong>Director:</strong> {{ pelicula.director }}</p>
      <p><strong>Año:</strong> {{ pelicula.anio }}</p>
      <p><strong>Género:</strong> {{ pelicula.genero }}</p>
      <p><strong>Descripción:</strong> {{ pelicula.descripcion || 'No disponible' }}</p>
      <p><strong>Puntaje:</strong> {{ pelicula.puntaje || 'N/A' }}</p>
      <p><strong>Estado:</strong> {{ pelicula.estado || 'Desconocido' }}</p>
      <p><strong>Creada:</strong> {{ pelicula.fechaCreacion | date:'short' }}</p>
      <p><strong>Modificada:</strong> {{ pelicula.fechaModificacion | date:'short' }}</p>
      <!-- Botones de acción para el CRUD (visibles en administración) -->
      <button (click)="editarPelicula(pelicula.id!)">
        Editar
      </button>
      <button (click)="eliminarPelicula(pelicula.id!)">
        Eliminar
      </button>
    </div>
  </div>
</div>

<!-- Puedes añadir estilos básicos aquí o en peliculas.component.css -->
<style>
  .container {
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto;
    font-family: sans-serif;
  }
  h1, h2 {
    text-align: center;
    margin-bottom: 20px;
  }
  button {
    background-color: #007bff;
    color: white;
    padding: 8px 15px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-right: 10px;
  }
  button:hover {
    background-color: #0056b3;
  }
  input[type="text"], select {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    margin-right: 10px;
  }
  .movie-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }
  .movie-card {
    border: 1px solid #ddd;
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .movie-card img {
    max-width: 100%;
    height: 200px;
    object-fit: cover;
    border-radius: 5px;
    margin-bottom: 10px;
  }
  .movie-card h3 {
    font-size: 1.2em;
    margin-bottom: 5px;
  }
  .movie-card p {
    font-size: 0.9em;
    color: #555;
    margin-bottom: 5px;
  }
</style>